# EduScheduler - Technical Documentation

---

## üìú Table of Contents

1.  [**Introduction**](#-introduction)
2.  [**System Architecture**](#-system-architecture)
3.  [**Technology Stack**](#-technology-stack)
4.  [**Project Structure**](#-project-structure)
    - [Frontend](#frontend)
    - [Backend](#backend)
5.  [**Database Schema**](#-database-schema)
6.  [**API Endpoints**](#-api-endpoints)
7.  [**Core Features Deep Dive**](#-core-features-deep-dive)
    - [AI Schedule Modification](#ai-schedule-modification)
    - [Multi-Admin System](#multi-admin-system)
8.  [**Local Development Setup**](#-local-development-setup)
9.  [**Deployment**](#-deployment)

---

## üìñ Introduction

**EduScheduler** is a comprehensive, full-stack educational management system designed for the SIH Hackathon 2025 (Problem ID: 25028). Its core purpose is to provide a robust platform for educational institutions to manage students, faculty, and academic structures, with a key innovation in its AI-powered scheduling capabilities. The system allows administrators to modify complex timetables using natural language commands, significantly reducing administrative overhead.

This document provides a detailed technical overview of the project's architecture, features, and implementation.

---

## üèóÔ∏è System Architecture

The application follows a modern, decoupled, full-stack architecture, consisting of three primary layers: a frontend client, a backend API, and a cloud database.

```mermaid
graph TD
    A[End User] -->|Interacts via Browser| B(Frontend - React/Vite);
    B -->|HTTPS API Calls| C{Backend - Node.js/Express};
    C -->|Firebase SDK| D[(Database - Firestore)];
    C -->|REST API| E[OpenAI API];

    subgraph "Render Cloud"
        B -- Deployed as --> B_S[Static Site];
        C -- Deployed as --> C_W[Web Service];
    end

    subgraph "Google Cloud"
        D;
    end

    subgraph "OpenAI"
        E;
    end
```

-   **Frontend**: A Single Page Application (SPA) built with React that provides the user interface. It is deployed as a **Static Site** on Render.
-   **Backend**: A Node.js/Express server that acts as a REST API. It handles all business logic, authentication, and is the only layer with direct access to the database and external AI services. It is deployed as a **Web Service** on Render.
-   **Database**: Google Firestore is used as the NoSQL database for storing all application data.

---

## üõ†Ô∏è Technology Stack

| Layer      | Technology                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            - **React**: Node.js, Express.js, OpenAI API, Firebase Admin SDK
- **Database**: Google Firestore
- **Deployment**: Render

---

## üìÇ Project Structure

### Frontend (`/src`)

```
src/
‚îú‚îÄ‚îÄ components/   # Reusable React components for UI elements.
‚îÇ   ‚îú‚îÄ‚îÄ admin/      # Components specific to the Admin Dashboard.
‚îÇ   ‚îú‚îÄ‚îÄ auth/       # Login, Signup, Forgot Password components.
‚îÇ   ‚îî‚îÄ‚îÄ common/     # Shared components like modals, spinners, etc.
‚îú‚îÄ‚îÄ contexts/     # React Contexts for global state management.
‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.tsx      # Manages user authentication state (user, role, token).
‚îÇ   ‚îú‚îÄ‚îÄ ThemeContext.tsx     # Manages dark/light mode.
‚îÇ   ‚îî‚îÄ‚îÄ LanguageContext.tsx  # Manages multilingual support.
‚îú‚îÄ‚îÄ services/     # Handles business logic and API communication.
‚îÇ   ‚îî‚îÄ‚îÄ apiService.ts      # Central service for making backend API calls.
‚îú‚îÄ‚îÄ types/        # TypeScript type definitions and interfaces (e.g., User, Schedule).
‚îî‚îÄ‚îÄ App.tsx       # Main application component, defines routing.
```

### Backend (`/server`)

```
server/
‚îú‚îÄ‚îÄ config/       # Configuration files (e.g., Firebase initialization).
‚îú‚îÄ‚îÄ middleware/   # Express middleware.
‚îÇ   ‚îî‚îÄ‚îÄ auth.js       # Verifies user tokens for protected routes.
‚îú‚îÄ‚îÄ routes/       # API route definitions for each resource (e.g., admin.js, student.js).
‚îú‚îÄ‚îÄ services/     # Backend-specific business logic.
‚îî‚îÄ‚îÄ index.js      # Main entry point for the Express server.
```

---

## üóÑÔ∏è Database Schema

Data is stored in Google Firestore, a NoSQL document database. The main collections include:

-   `users`: Stores user profiles, including their role (`admin`, `faculty`, `student`) and authentication UID.
-   `schedules`: Contains all class, exam, and event schedule documents.
-   `students`, `faculty`, `departments`, `subjects`, `classrooms`: Collections for managing the core academic data.
-   `announcements`: For site-wide notifications.
-   `ai_interactions`: Logs conversations with the AI for history and auditing.

---

## üåê API Endpoints

A RESTful API is provided by the backend server. All endpoints are prefixed with `/api`.

| Endpoint                      | Method | Protected | Description                                            |
| ----------------------------- | ------ | --------- | ------------------------------------------------------ |
| `/auth/login`                 | POST   | No        | Authenticates a user and returns a token.              |
| `/auth/signup`                | POST   | No        | Registers a new student (pending approval).            |
| `/admin/students`             | GET    | Yes       | Retrieves a list of all students.                      |
| `/admin/students/:id`         | PUT    | Yes       | Updates a specific student's details.                  |
| `/admin/approve-student/:id`  | POST   | Yes       | Approves a new student's registration.                 |
| `/faculty/assignments`        | POST   | Yes       | Creates a new assignment for a course.                 |
| `/schedule/generate`          | POST   | Yes       | Initiates the AI schedule generation process.          |
| `/ai-schedule-modify`         | POST   | Yes       | Processes a natural language command for the AI.       |
| `/health`                     | GET    | No        | Health check endpoint used by Render.                  |

*This is a simplified list. See the `/server/routes` directory for a complete definition of all endpoints.*

---

## ‚ú® Core Features Deep Dive

### AI Schedule Modification

1.  **Request**: The admin user types a natural language command (e.g., "Move the Physics class to Wednesday at 10 AM") into the frontend.
2.  **API Call**: The frontend sends this command to the `/api/ai-schedule-modify` endpoint on the backend.
3.  **Backend Processing**: The backend server constructs a detailed prompt containing the user's command, current schedule data, and constraints.
4.  **OpenAI API**: This prompt is sent to the OpenAI GPT-4 API.
5.  **AI Response**: OpenAI processes the request and returns a structured JSON object containing the proposed modifications, conflicts, and a human-readable summary.
6.  **Frontend Display**: The frontend receives this JSON and displays the proposed changes to the admin for confirmation.
7.  **Confirmation**: If the admin confirms, the frontend sends the `modifications` array to the `/api/apply-modifications` endpoint to be committed to the database.

### Multi-Admin System

-   **Isolation**: Data is isolated based on an `adminId` or `institutionId` field present in most database documents.
-   **Security Rules**: Firestore Security Rules are critical. They ensure that a logged-in user can only read or write data that contains their own `adminId`. For example:
    ```
    match /schedules/{scheduleId} {
      allow read, write: if request.auth.uid == resource.data.adminId;
    }
    ```
-   **Registration**: Faculty and students register using a secret code that links them to the correct admin/institution.

---

## üõ†Ô∏è Local Development Setup

1.  **Clone Repository**: `git clone https://github.com/rajpratham1/EduScheduler.git`
2.  **Install Backend Dependencies**: `cd EduScheduler/server && npm install`
3.  **Install Frontend Dependencies**: `cd .. && npm install`
4.  **Configure Backend**: Create `.env` and `firebase-service-account.json` files in the `/server` directory based on the provided `.example` files.
5.  **Configure Frontend**: Create a `.env` file in the project root and add all `VITE_FIREBASE_*` keys.
6.  **Run Servers**: Start the backend (`npm start` in `/server`) and frontend (`npm run dev` in root) in separate terminals.

---

## üöÄ Deployment

This project is deployed on **Render** as two separate services.

-   **Backend (Web Service)**: Deploys from the `/server` directory. Requires `NODE_ENV` set to `production` and all secrets configured in the Render dashboard.
-   **Frontend (Static Site)**: Deploys from the project root, building the `/dist` directory. Requires `VITE_API_URL` to be set to the live backend URL.
